<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ player.name }} - Season {{ season }} Ratings</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>{{ player.name }} - Ratings for Season {{ season }}</h1>

    {% if average %}
        <table border="1">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Average Rating (out of 5)</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Attacking</td><td>{{ average.attacking }}</td></tr>
                <tr><td>Creativity</td><td>{{ average.creativity }}</td></tr>
                <tr><td>Defending</td><td>{{ average.defending }}</td></tr>
                <tr><td>Tactical</td><td>{{ average.tactical }}</td></tr>
                <tr><td>Technical</td><td>{{ average.technical }}</td></tr>
            </tbody>
        </table>

        <h2>Radar Chart</h2>
        <canvas id="seasonRadarChart" width="400" height="400"></canvas>
        <script>
            const ctx = document.getElementById('seasonRadarChart').getContext('2d');
            const chart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Attacking', 'Creativity', 'Defending', 'Tactical', 'Technical'],
                    datasets: [{
                        label: '{{ player.name }} - Season {{ season }}',
                        data: [
                            {{ average.attacking }},
                            {{ average.creativity }},
                            {{ average.defending }},
                            {{ average.tactical }},
                            {{ average.technical }}
                        ],
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                    }]
                },
                options: {
                    scale: {
                        ticks: {
                            beginAtZero: true,
                            max: 5
                        }
                    }
                }
            });
        </script>
    {% else %}
        <p>No rating data available for this season.</p>
    {% endif %}
</body>
</html>
