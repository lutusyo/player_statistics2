{% extends "matches_app/matches_base.html" %}
{% load static %}

{% block title %}Match Statistics{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'matches_app/css/players_statistics.css' %}">

<div class="filter-container">
    <form method="get" class="filter-form">
        <select name="season" onchange="this.form.submit()">
            <option value="">Season</option>
            {% for key, label in seasons.items %}
                <option value="{{ key }}" {% if selected_season == key %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>

        <select name="competition" onchange="this.form.submit()">
            <option value="">Competition</option>
            {% for key, label in competitions.items %}
                <option value="{{ key }}" {% if selected_competition == key %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>

        <select name="age_group" onchange="this.form.submit()">
            <option value="">Age Group</option>
            {% for group in age_groups %}
                <option value="{{ group.code }}" {% if selected_age_group == group.code %}selected{% endif %}>{{ group.name }}</option>
            {% endfor %}
        </select>
    </form>
</div>

<div class="stats-table-section">
    <h2 class="stats-heading">{{ team_selected|upper }} STATISTICS {{ selected_season }}</h2>

    <table class="stats-table">
        <thead>
            <tr>
                <th>PLAYER</th>
                <th colspan="2">Local Friendly</th>

            </tr>
            <tr>
                <th></th>
                <th>AP</th><th>GL</th>

            </tr>
        </thead>
        <tbody>
            {% for item in player_data %}
            <tr>
                <td>{{ item.player.name }}</td>
                <td>{{ item.local_ap }}</td>
                <td>{{ item.local_gl }}</td>

            </tr>
            {% empty %}
            <tr>
                <td colspan="9" class="no-data">No stats found for selected filters.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
