{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2>{{ match.home_team.name }} vs {{ match.away_team.name }}</h2>
    <p class="text-muted">{{ match.date|date:"M d, Y" }}</p>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="matchTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab">Info</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summary" type="button" role="tab">Summary</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats" type="button" role="tab">Stats</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="lineup-tab" data-bs-toggle="tab" data-bs-target="#lineup" type="button" role="tab">Line-up</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="h2h-tab" data-bs-toggle="tab" data-bs-target="#h2h" type="button" role="tab">H2H</button>
        </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content mt-3" id="matchTabsContent">
        <!-- Info Tab -->
        <div class="tab-pane fade show active" id="info" role="tabpanel">
            <h5>Match Information</h5>
            <p><strong>Date:</strong> {{ match.date }}</p>
            <p><strong>Venue:</strong> {{ match.venue }}</p>
            <p><strong>Competition:</strong> {{ match.competition }}</p>
        </div>

        <!-- Summary Tab -->
        <div class="tab-pane fade" id="summary" role="tabpanel">
            <h5>Match Summary</h5>
            {% if match.summary %}
                <p>{{ match.summary }}</p>
            {% else %}
                <p>No summary available yet.</p>
            {% endif %}
        </div>

        <!-- Stats Tab -->
        <div class="tab-pane fade" id="stats" role="tabpanel">
            <h5>Match Stats</h5>
            <p>Shots, passes, duels, etc. will go here.</p>
        </div>

        <!-- Lineup Tab -->
        <div class="tab-pane fade" id="lineup" role="tabpanel">
            <h5>Line-up</h5>
            <div class="row">
                <div class="col-md-6">
                    <h6>{{ match.home_team.name }}</h6>
                    <ul>
                        {% for player in home_lineup %}
                            <li>{{ player._name }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="col-md-6">
                    <h6>{{ match.away_team.name }}</h6>
                    <ul>
                        {% for player in away_lineup %}
                            <li>{{ player.full_name }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>

        <!-- H2H Tab -->
        <div class="tab-pane fade" id="h2h" role="tabpanel">
            <h5>Head-to-Head</h5>
            {% if h2h_results %}
                <ul>
                    {% for result in h2h_results %}
                        <li>{{ result }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No past meetings available.</p>
            {% endif %}
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    var triggerTabList = [].slice.call(document.querySelectorAll('#matchTabs button'))
    triggerTabList.forEach(function(triggerEl) {
        var tabTrigger = new bootstrap.Tab(triggerEl)

        triggerEl.addEventListener('click', function (event) {
            event.preventDefault()
            tabTrigger.show()
        })
    })
});
</script>




    <hr style="margin: 40px 0;">

    <!--reports_app:ntro_page-->

    <!--<a href="{% url 'reports_app:intro_page' 'pass_network' match.id %}" 
        style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        ðŸ“Š View Pass Network
    </a>-->


    <a href="{% url 'tagging_app:pass_network_dashboard' match.id %}" style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        ðŸ“Š View Pass Network
    </a> | 


    <a href="{% url 'tagging_app:attempt_to_goal_dashboard' match.id %}" style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        ðŸ“Š View Goal Attempts
    </a> | 
    <a href="{% url 'tagging_app:goalkeeper_distribution_dashboard' match.id %}" style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        ðŸ“Š View Goalkeeping Distribution
    </a> | 
    <a href="{% url 'defensive_app:defensive_summary' match.id  %}"  style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        ðŸ“Š View Other statistics
    </a> 

</div>
{% endblock %}


