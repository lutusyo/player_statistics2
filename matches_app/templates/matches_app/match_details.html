{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container" style="max-width: 900px; margin: auto;">

    <!-- Match Title -->
    <h2 style="text-align: center; margin-bottom: 20px;">
        {{ home_team_name }} vs {{ away_team_name }}
    </h2>

    <!-- Match Info Grid -->
    <div style="
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        background: #f9f9f9;
        padding: 15px 20px;
        border-radius: 10px;
        font-size: 14px;
        margin-bottom: 30px;
    ">
        <div><strong>📅 Date:</strong> {{ match.date }}</div>
        <div><strong>🕒 Time:</strong>{{ match.time|time:"H:i" }}</div>
        <div><strong>📍 Venue:</strong> {{ match.venue }}</div>
        <div><strong>🏆 Competition:</strong> {{ match.get_competition_type_display }}</div>
        <div><strong>📅 Season:</strong> {{ match.season }}</div>
    </div>

    <!-- Score Section -->
    <div style="display: flex; align-items: center; justify-content: center; gap: 30px; margin-bottom: 30px;">
        <div style="text-align: center;">
            {% if match.home_team.logo %}
                <img src="{{ match.home_team.logo.url }}" alt="Home Team Logo" height="60">
            {% endif %}
            <div>{{ home_team_name }}</div>
        </div>

        <div style="font-size: 22px; font-weight: bold;">
            {{ home_team_goals|default:0 }} - {{ away_team_goals|default:0 }}
        </div>

        <div style="text-align: center;">
            {% if match.away_team.logo %}
                <img src="{{ match.away_team.logo.url }}" alt="Away Team Logo" height="60">
            {% endif %}
            <div>{{ away_team_name }}</div>
        </div>
    </div>

    <!-- Include Line up -->
    {% include "matches_app/starting_and_subs.html" %}

    <!-- Goals Timeline -->
    <h3>⚽ Goals Timeline</h3>

    {% if goals %}
        <p style="font-size: 18px; font-weight: bold; color: green; margin-top: -10px;">
            Total Goals: {{ goals|length }}
        </p>
        <ul style="line-height: 1.8;">
            {% for goal in goals %}
                <li>
                    {{ goal.minute }}':
                    {% if goal.is_own_goal %}
                        🥅 Own Goal by {{ goal.scorer }}
                    {% else %}
                        {{ goal.scorer }}
                        {% if goal.assist_by %}(Assist: {{ goal.assist_by }}){% endif %}
                    {% endif %}
                    ({{ goal.team_name }})
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>0 - 0</p>
    {% endif %}

    <hr style="margin: 40px 0;">

    <!--reports_app:ntro_page-->

    <a href="{% url 'reports_app:intro_page' 'pass_network' match.id %}" 
        style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        📊 View Pass Network
    </a>


    <!--<a href="{% url 'tagging_app:pass_network_dashboard' match.id %}" style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        📊 View Pass Network
    </a> | -->


    <a href="{% url 'tagging_app:attempt_to_goal_dashboard' match.id %}" style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        📊 View Goal Attempts
    </a> | 
    <a href="{% url 'tagging_app:goalkeeper_distribution_dashboard' match.id %}" style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        📊 View Goalkeeping Distribution
    </a> | 
    <a href="{% url 'defensive_app:defensive_summary' match.id  %}"  style="padding: 8px 14px; background: #007BFF; color: white; text-decoration: none; border-radius: 5px;">
        📊 View Other statistics
    </a> 

</div>
{% endblock %}
