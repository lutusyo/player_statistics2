{% extends "matches_app/matches_base.html" %}
{% block match_content %}

<div class="league-table-page">

    <!-- Filter Row -->
    <form method="get">
        <label>Competition</label>
        <select name="competition" onchange="this.form.submit()">
            <option value="">All Competitions</option>
            {% for comp in competitions %}
                <option value="{{ comp.id }}"
                    {% if comp.id|stringformat:"s" == competition_selected %}
                        selected
                    {% endif %}
                >
                    {{ comp.name }}
                </option>
            {% endfor %}
        </select>

        <label>Season</label>
        <select name="season" onchange="this.form.submit()">
            {% for value, label in seasons %}
                <option value="{{ value }}"
                    {% if value == season_selected %}
                        selected
                    {% endif %}
                >
                    {{ label }}
                </option>
            {% endfor %}
        </select>
    </form>


    <!-- League Table -->
    <div class="table-wrapper">
        <table class="league-table compact">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>Team</th>
                    <th>P</th>
                    <th>W</th>
                    <th>D</th>
                    <th>L</th>
                    <th>GF</th>
                    <th>GA</th>
                    <th>GD</th>
                    <th>Pts</th>
                </tr>
            </thead>

            <tbody>
                {% for team, stats in league_table %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td class="team-cell">
                        {% if team.logo %}
                            <img src="{{ team.logo.url }}" alt="{{ team.name }}">
                        {% endif %}
                        {{ team.name }}
                    </td>
                    <td>{{ stats.P }}</td>
                    <td>{{ stats.W }}</td>
                    <td>{{ stats.D }}</td>
                    <td>{{ stats.L }}</td>
                    <td>{{ stats.GF }}</td>
                    <td>{{ stats.GA }}</td>
                    <td>{{ stats.GD }}</td>
                    <td class="points">{{ stats.Pts }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="10" class="no-data">No data found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

{% endblock %}
